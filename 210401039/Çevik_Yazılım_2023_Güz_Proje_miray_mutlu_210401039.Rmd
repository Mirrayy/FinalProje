---
title: "Proje Rapor : Miray Mutlu 210401039"
output:
  html_document:
    df_print: paged
---

# Q1 : Problem tanımı:

Şirketimiz **Howling Fjord LTD ŞTİ AŞ**. Problemimiz *araç kiralama sektöründe faaliyet göstermek isteyenlerin kaç yaşında hangi yakıt kullanan araçlar tercih etmeleri gerektiğini buluyoruz*. 

# Q2 : Proje Amacı

https://www.kaggle.com/datasets/kushleshkumar/cornell-car-rental-dataset/data) adli Kaggle veri setini kullanarak iş problemini *dataset içerisindeki araç tipi modeli yakıt tipi yaşı gibi özellikleri değerlendirmek* ve **bu data setten çıkan tabloları/grafikleri/istatistikleri olarak yorumlama** yaparak çözmeyi amaçlıyoruz. Bu sayede problemi azaltmayı / yok etmeyi ya da kar arttırımına katkıda bulunmayı planlıyoruz. 


# Q3 : Veri seti keşifsel analizi

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Veri dosyasını internetten indir ve git repo'sunun içine commitle
filename <- "CarRentalData.csv"

# Dosyayi ithal et
library(readr)
myDF <- read_csv(filename)
```

Veri seti Kaggle web sitesinden indirilmiştir ve **readr::read_csv()** fonksiyonu kullanılmıştır Veri boyutları aşağıdaki gibidir :

- Satir sayisi : `r nrow(myDF)`
- Satir sayisi : `r ncol(myDF)`


Histogramlarda araçların yapım yılları, derecelendirmeleri ve yorum sayıları bulunuyor.
```{r echo=FALSE, message=FALSE, warning=FALSE}
hist(myDF$vehicle.year, breaks = 10)
hist(myDF$rating, breaks = 10)
hist(myDF$reviewCount, breaks = 10)
```

Yorum sayısı 150'den büyük olanlar filtrelenmiştir.

```{r echo=FALSE, message=FALSE, warning=FALSE}
filtered_data <- subset(myDF, `reviewCount` > 150) 
filtered_data
```
2015 sonrasında üretilen araçlar filtrelenmiştir



```{r echo=FALSE, message=FALSE, warning=FALSE}
filtered_data <- subset(myDF, `vehicle.year` > 2015) 
filtered_data
```

ARAÇLARIN YAKIT TÜKETİM TÜRLERİ

```{r echo=FALSE, message=FALSE, warning=FALSE}
veri <- read.csv("C:/Users/90537/Desktop/210401039/FinalProje/210401039/CarRentalData.csv")

# "fuelType" sütununu seç
fuelType_sutunu <- veri$fuelType
# "fuelType" sütununun frekans tablosunu oluştur
frekans_tablosu <- table(fuelType_sutunu)

# Pasta grafiğini çiz
pie(frekans_tablosu, main = "Araç Fuel Type Dağılımı", col = rainbow(length(frekans_tablosu)))

# hangi araç çeşidi ve hangi yıllarda üretilen araç çeşitleri yoğunlukla kullanılır onu görüyoruz
```


```{r echo=FALSE, message=FALSE, warning=FALSE,results='hide'}

source("Q3_tests_miray_mutlu_210401039.R")

```

# Q4 : Veri seti ön işlemesi
Ön İşleme Raporu: 

vehicle.model sütunu: Null değerleri silindi ve araç tipleri yazıldı.

location.state Sütunu: null değerleri silindi ve eyaletler yazıldı.

vehicle.type sütunu: null değerler silindi ve araçların yakıt türleri yazıldı.

reviewCount sütunu: null değerler silindi ve sayıları yazıldı.

Yaptığımız şemalara göre memnun kalınılan araçların yapım yılı 2015 sonrası olan, yorum sayısı 150 üstü olan ve rating'i 5 olan araçların yakıt tüketimi, model, tip, memnun kalınan eyalet ve yorum sayıları aşağıdadır.


```{r echo=FALSE, message=FALSE, warning=FALSE}
library(dplyr)

selected_data <- myDF %>%
   filter(vehicle.year > 2015) %>%
    filter(reviewCount > 130) %>%
    filter(rating > 4) %>%
    select(vehicle.model,`location.state`,`vehicle.type`, `fuelType`, `reviewCount`)
selected_data

```



```{r echo=FALSE, message=FALSE, warning=FALSE,results='hide'}
source("Q4_tests_miray_mutlu_210401039.R")

```




# Q5 : Veri Mühendisliği

Filtrelerden geçip oluşan sentetik verimizin yakıt türü grafiği:

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Örnek veri oluştur
veri <- c("gasoline", "hybrid", "electric", "gasoline", "electric", "electric", "electric", "electric", "electric", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline")

# table() fonksiyonu ile tablo oluştur
frekans_tablosu <- table(veri)

# Oluşturulan tabloyu görüntüle
print(frekans_tablosu)

# Tabloyu bar plot olarak çiz
barplot(frekans_tablosu, main = "Yakıt Türleri Dağılımı", xlab = "yakıt türü", ylab = "miktar", col = "blue")

```

Tablonun pasta grafiğinde gösterimi:

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Veriyi oluştur
veri <- c("gasoline", "hybrid", "electric", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "electric", "electric", "electric", "electric", "electric", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline", "gasoline")

# Faktörleri oluştur
faktor_veri <- as.factor(veri)

# Faktörlerin frekanslarını hesapla
frekanslar <- table(faktor_veri)

# Faktör seviyelerine özel renkleri belirle
renkler <- c("green", "blue", "purple")

# Pasta grafiğini çiz
pie(frekanslar, labels = frekanslar, main = "Yakıt Türleri Dağılımı", col = renkler)

```

Eyalet/Memnuniyet tablosu:

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Örnek veri oluştur
veri <- c("CA", "CA", "CA", "CA", "CA", "CA", "CA", "CA", "CA", "CA", "CA", "CA", "CA", "CA", "CA", "GA", "TN", "TN", "TX", "TX", "TX", "TX", "TX", "TX", "TX", "TX", "TX", "TX", "CO", "NJ", "NJ", "MI", "FL", "FL", "FL", "FL", "FL", "IL", "NV", "NV", "NV", "NV", "NV", "NV", "NV", "NV", "HI", "OR", "OR", "LA", "AZ", "AZ")

# table() fonksiyonu ile tablo oluştur
frekans_tablosu <- table(veri)

# Oluşturulan tabloyu görüntüle
print(frekans_tablosu)


# Tabloyu bar plot olarak çiz
barplot(frekans_tablosu, main = "Eyalet/Memnuniyet", xlab = "EYALETLER", ylab = "memnun kalınan miktar", col = "purple")
```






```{r echo=FALSE, message=FALSE, warning=FALSE}
# Örnek veri oluştur
veri <- c("suv", "suv", "car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car","car")

# table() fonksiyonu ile tablo oluştur
frekans_tablosu <- table(veri)

# Oluşturulan tabloyu görüntüle
print(frekans_tablosu)

# Tabloyu bar plot olarak çiz
barplot(frekans_tablosu, main = "Araç Türü", xlab = "araç türü", ylab = "miktar", col = "orange")
```


Kullanılan araçların çeşitlerinin grafiği:





```{r echo=FALSE, message=FALSE, warning=FALSE}
library(dplyr)

selected_data <- myDF %>%
   filter(vehicle.year > 2015) %>%
    filter(reviewCount > 130) %>%
    filter(rating > 4) %>%
    select(vehicle.make,`vehicle.model`, `vehicle.type`, `fuelType`)
selected_data
```

Kullanılan araçların bulundukları eyaletler ile olan tablosu:


```{r echo=FALSE, message=FALSE, warning=FALSE}

selected_data <- myDF %>%
   filter(vehicle.year > 2015) %>%
    filter(reviewCount > 130) %>%
    filter(rating > 4) %>%
    select(location.state,`vehicle.type`, `fuelType`)
selected_data
```
Nevada, California ve Texas'ta benzinli araçlardan çok memnun kalındığı için bu eyaletlerde benzinli araçlar ile araç kiralama dükkanı açılabilir. Ancak aynı şekilde, California'da elektrikli araç kiralanma miktarı da son yıllarda artış göstermekte olduğundan, açılacak araç kiralama dükkanı için elektrikli araçlar da tavsiye edilmektedir.

Elektrikli araç markası olarak da kesinlikle Tesla tavsiye edilmektedir.

